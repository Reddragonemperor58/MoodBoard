import{r as n}from"./react-CrjHA9CC.js";const H=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",L=H?n.useLayoutEffect:n.useEffect;function M(e){const t=n.useRef(e);return L(()=>{t.current=e}),n.useCallback(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.current==null?void 0:t.current(...i)},[])}function y(e,t){t===void 0&&(t=[e]);const r=n.useRef(e);return L(()=>{r.current!==e&&(r.current=e)},t),r}function N(e){const t=M(e),r=n.useRef(null),i=n.useCallback(a=>{a!==r.current&&(t==null||t(a,r.current)),r.current=a},[]);return[r,i]}let D={};function Y(e,t){return n.useMemo(()=>{const r=D[e]==null?0:D[e]+1;return D[e]=r,e+"-"+r},[e,t])}var d;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(d||(d={}));function I(){}const $=Object.freeze({x:0,y:0});var u;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(u||(u={}));var T;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(T||(T={}));var c;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(c||(c={}));c.Space,c.Enter,c.Esc,c.Space,c.Enter,c.Tab;var U;(function(e){e[e.RightClick=2]="RightClick"})(U||(U={}));var x;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(x||(x={}));var B;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(B||(B={}));u.Backward+"",u.Forward+"",u.Backward+"",u.Forward+"";var R;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(R||(R={}));var w;(function(e){e.Optimized="optimized"})(w||(w={}));function G(e){let{callback:t,disabled:r}=e;const i=M(t),a=n.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(i)},[r]);return n.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}R.WhileDragging,w.Optimized;const J={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:I,draggableNodes:new Map,over:null,measureDroppableContainers:I},Q=n.createContext(J);({...$});var F;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(F||(F={}));const S="Droppable",Z={timeout:25};function _(e){let{data:t,disabled:r=!1,id:i,resizeObserverConfig:a}=e;const o=Y(S),{active:z,dispatch:f,over:p,measureDroppableContainers:q}=n.useContext(Q),h=n.useRef({disabled:r}),g=n.useRef(!1),C=n.useRef(null),b=n.useRef(null),{disabled:P,updateMeasurementsFor:O,timeout:k}={...Z,...a},v=y(O??i),W=n.useCallback(()=>{if(!g.current){g.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{q(Array.isArray(v.current)?v.current:[v.current]),b.current=null},k)},[k]),s=G({callback:W,disabled:P||!z}),V=n.useCallback((m,E)=>{s&&(E&&(s.unobserve(E),g.current=!1),m&&s.observe(m))},[s]),[l,X]=N(V),j=y(t);return n.useEffect(()=>{!s||!l.current||(s.disconnect(),g.current=!1,s.observe(l.current))},[l,s]),n.useEffect(()=>(f({type:d.RegisterDroppable,element:{id:i,key:o,disabled:r,node:l,rect:C,data:j}}),()=>f({type:d.UnregisterDroppable,key:o,id:i})),[i]),n.useEffect(()=>{r!==h.current.disabled&&(f({type:d.SetDroppableDisabled,id:i,key:o,disabled:r}),h.current.disabled=r)},[i,o,r,f]),{active:z,rect:C,isOver:(p==null?void 0:p.id)===i,node:l,over:p,setNodeRef:X}}export{_ as u};
